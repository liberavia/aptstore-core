#!/usr/bin/env python3
# -*- coding: utf-8 -*-
import sys
import getopt
import os
import argparse

parser = argparse.ArgumentParser(
    description='Install/Remove programs from different sources.'
)

parser.add_argument('platform', help='Platform that shall be used for action')
parser.add_argument('action', help='Action that shall be performed on platform')
parser.add_argument('ident', help='Identifier for action')
parser.add_argument('--login', help='Optional login (depends on platform)')
parser.add_argument('--secret', help='Optional password (depends on platform)')
args = parser.parse_args()

platform = args.platform
action = args.action
ident = args.ident
login = args.login
password = args.secret

LAUNCH_PATH = os.path.dirname(os.path.realpath(__file__))

if os.path.isdir(os.path.join(LAUNCH_PATH, "../aptstore_core")):
    sys.dont_write_bytecode = True
    SOURCE_PATH = os.path.normpath(os.path.join(LAUNCH_PATH, '..'))
    sys.path.insert(0, SOURCE_PATH)

from aptstore_core.aptstore_core import AptStoreCore

aptstore = AptStoreCore(platform, action, ident)
if login:
    aptstore.set_login(login)
if password:
    aptstore.set_password(password)

# get options
aptstore.trigger_action()
